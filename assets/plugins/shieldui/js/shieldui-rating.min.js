/* Shield UI 1.7.6 Trial Version | Copyright 2013-2015 Shield UI Ltd. | www.shieldui.com/eula */
!function(b,e){"use strict";var a,c,d=e.ui.Widget,f=b.extend,g="change";a={min:0,max:5,step:1,symbolWidth:16,symbolHeight:16,enabled:!0,markPreset:!1,value:0,events:{}},c=d.extend({init:function(b,c){var a=this;d.fn.init.apply(a,arguments),a._enabled=a.options.enabled,a._renderRating(b,c,!1)},_setSelection:function(c){var a=this;if(a._enabled){var d=b.Event("beforerated");return a._item.trigger(d,[c]),d.isDefaultPrevented()?!1:(a._itemdata("value",c),a._itemdata("backingfld")&&b(a._itemdata("backingfld")).val(c).trigger("change"),a._itemdata("markPreset")&&a._itemdata("markPreset",!1),a._range.find(".sui-rating-hover").hide(),a._range.find(".sui-rating-selected").width(c*a._itemdata("symbolWidth")-a._itemdata("min")*a._itemdata("symbolWidth")).show(),a._item.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[c]),a.trigger(g),!0)}},_calcRawScore:function(e,d){var c=this,f=d.changedTouches?d.changedTouches[0].pageX:d.pageX,a=f-b(e).offset().left;return c._ltr||(a=c._range.width()-a),a>c._range.width()&&(a=c._range.width()),0>a&&(a=0),Math.ceil(a/c._itemdata("symbolWidth")*(1/c._itemdata("step")))},_setHover:function(c){var a=this;if(a._enabled){var b=c*a._itemdata("symbolWidth")*a._itemdata("step"),d=a._range.find(".sui-rating-hover");if(d.data("width")!=b){a._range.find(".sui-rating-selected").hide(),d.width(b).show().data("width",b);var e=[c*a._itemdata("step")+a._itemdata("min")];a._item.trigger("hover",e).trigger("over",e)}}},_itemdata:function(b,c){var a=this;if(null!=c){var d="aria-value"+("value"==b?"now":b);a._range=a._item.find(".sui-rating-range"),void 0!==a._range.attr(d)&&a._range.attr(d,c)}return arguments[0]="shieldRating"+b.charAt(0).toUpperCase()+b.substr(1),a._item.data.apply(a._item,arguments)},_touchHandler:function(b){var e=b.originalEvent.changedTouches,a=e[0],c="";switch(b.type){case"touchmove":c="mousemove";break;case"touchend":c="mouseup";break;default:return}var d=document.createEvent("MouseEvent");d.initMouseEvent(c,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d),b.preventDefault()},_renderRating:function(d,c,e){var b=this,g=1;if(b._item=b.element,b._item.hasClass("sui-rating")||b._item.addClass("sui-rating"),b._ltr=!b.element.parent().hasClass("sui-rtl"),e){var h=null;h=void 0===b._itemdata("value")?isNaN(c.value)?a.value:c.value:b._itemdata("value"),b._itemdata("value",h),b._itemdata("enabled",b._enabled),b._enabled&&b._itemdata("wired",!1)}if(!b._itemdata("init")){b._itemdata("min",isNaN(c.min)?a.min:c.min),b._itemdata("max",isNaN(c.max)?a.max:c.max),b._itemdata("step",isNaN(c.step)?a.step:c.step),b._itemdata("enabled",b._enabled?!0:!1),b._itemdata("symbolWidth",isNaN(c.symbolWidth)?a.symbolWidth:c.symbolWidth),b._itemdata("symbolHeight",isNaN(c.symbolHeight)?a.symbolHeight:c.symbolHeight),b._itemdata("value",isNaN(c.value)?a.value:c.value),b._itemdata("markPreset",isNaN(c.markPreset)?a.markPreset:c.markPreset),b._min=b._itemdata("min"),b._max=b._itemdata("max"),b._value=b._itemdata("value"),d="DIV"==b._item[0].nodeName?"div":"span",g++;var j='<{{element}} id="shieldRating-range-{{index}}" class="sui-rating-range" tabindex="0"><{{element}} class="sui-rating-selected" style="height:'+b._itemdata("symbolHeight")+'px"></{{element}}><{{element}} class="sui-rating-hover" style="height:'+b._itemdata("symbolHeight")+'px"></{{element}}></{{element}}>',k=j.replace(/{{index}}/gi,g).replace(/{{element}}/gi,d);this.element.append(k),b._itemdata("init",f(!0,{},b._item.data()))}b._item.find(".sui-rating-selected, .sui-rating-hover").height(b._itemdata("symbolHeight")),b._range=b._item.find(".sui-rating-range"),b._range.width(b._itemdata("symbolWidth")*(b._itemdata("max")-b._itemdata("min"))).height(b._itemdata("symbolHeight"));var i="sui-rating-preset"+(b._ltr?"":"-rtl");if(b._itemdata("markPreset")?b._item.find(".sui-rating-selected").addClass(i):b._item.find(".sui-rating-selected").removeClass(i),null!=b._itemdata("value")){var l=(b._itemdata("value")-b._itemdata("min"))*b._itemdata("symbolWidth");b._item.find(".sui-rating-selected").width(l)}b._itemdata("wired")||(b._enabled&&(e||(b._range.on("touchmove touchend",b._touchHandler),b._range.mousemove(function(a){var c=b._calcRawScore(this,a);b._setHover(c)}),b._range.mouseleave(function(){b._range.find(".sui-rating-hover").hide().width(0).data("width",""),b._item.trigger("hover",[null]).trigger("over",[null]),b._range.find(".sui-rating-selected").show()}),b._range.mouseup(function(a){var c=b._calcRawScore(this,a),d=c*b._itemdata("step")+b._itemdata("min");b._setSelection(d),b._range.blur()}),b._range.keyup(function(a){(38==a.which||a.which==(b._ltr?39:37))&&b._setSelection(Math.min(b._itemdata("value")+b._itemdata("step"),b._itemdata("max"))),(40==a.which||a.which==(b._ltr?37:39))&&b._setSelection(Math.max(b._itemdata("value")-b._itemdata("step"),b._itemdata("min")))}))),b._itemdata("wired",!0))},value:function(){var a=this,c=a.options,d=[].slice.call(arguments);if(!(d.length>0)){var e=null;return e=void 0===a._itemdata("value")?void 0===c.value?a._itemdata("value"):c.value:a._itemdata("value")}var b=d[0];b<a._min||b>a._max||(a.options.value=b,a._itemdata("value",b),a._renderRating(a,c,!0))},enabled:function(){var a=this,c=a.options,b=[].slice.call(arguments);return b.length>0?(a._enabled=b[0],a._renderRating(a,c,!0),a._enabled?a.element.removeClass("sui-rating-disabled"):a.element.addClass("sui-rating-disabled"),void 0):a._enabled},destroy:function(){var a=this;b(a.element).removeClass("sui-rating-hover sui-rating-selected sui-rating-disabled sui-rating-preset-rtl sui-rating-preset sui-rating").empty(),a._range.off("touchmove touchend",a._touchHandler),a._enabled=a._min=a._max=a._value=a._ltr=a._item=a._range=null,d.fn.destroy.call(a)}}),c.defaults=a,e.ui.plugin("Rating",c)}(jQuery,shield,this);